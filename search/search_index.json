{"config":{"indexing":"full","lang":["en"],"min_search_length":3,"prebuild_index":false,"separator":"[\\s\\-]+"},"docs":[{"location":"","text":"PirateBox \u00b6 PirateBox is a local-only sharing box for Raspberry Pi. You join an open Wi-Fi, hit a local web page, and trade files, chat messages, or forum threads without the internet meddling in your business. It is a small rebellion against the cloud, and like most rebellions, it is mostly paperwork. Quick links \u00b6 Overview Install on Raspberry Pi Prebuilt Image Architecture Configuration Operations Troubleshooting E-Paper HAT Development FAQ What this is \u00b6 PirateBox is an offline-first web app that runs on a Raspberry Pi and serves a captive portal, a file drop, a chat room, and a forum. Everything lives in SQLite on the device. No accounts, no cloud, no excuses. What this is not \u00b6 A secure dropbox for secrets. It is open Wi-Fi by design. A high-availability system. The Pi is the single point of failure and also the single point of truth. A substitute for backups. You still have to do those yourself. If you are in a hurry \u00b6 Flash Raspberry Pi OS Lite (64-bit). Run the setup script or follow the manual steps in Install on Raspberry Pi . Connect to the PirateBox Wi-Fi and open http://10.0.0.1:8080 . If you want a prebuilt image, read Prebuilt Image . It does more work up front so you can pretend you are efficient.","title":"Home"},{"location":"#piratebox","text":"PirateBox is a local-only sharing box for Raspberry Pi. You join an open Wi-Fi, hit a local web page, and trade files, chat messages, or forum threads without the internet meddling in your business. It is a small rebellion against the cloud, and like most rebellions, it is mostly paperwork.","title":"PirateBox"},{"location":"#quick-links","text":"Overview Install on Raspberry Pi Prebuilt Image Architecture Configuration Operations Troubleshooting E-Paper HAT Development FAQ","title":"Quick links"},{"location":"#what-this-is","text":"PirateBox is an offline-first web app that runs on a Raspberry Pi and serves a captive portal, a file drop, a chat room, and a forum. Everything lives in SQLite on the device. No accounts, no cloud, no excuses.","title":"What this is"},{"location":"#what-this-is-not","text":"A secure dropbox for secrets. It is open Wi-Fi by design. A high-availability system. The Pi is the single point of failure and also the single point of truth. A substitute for backups. You still have to do those yourself.","title":"What this is not"},{"location":"#if-you-are-in-a-hurry","text":"Flash Raspberry Pi OS Lite (64-bit). Run the setup script or follow the manual steps in Install on Raspberry Pi . Connect to the PirateBox Wi-Fi and open http://10.0.0.1:8080 . If you want a prebuilt image, read Prebuilt Image . It does more work up front so you can pretend you are efficient.","title":"If you are in a hurry"},{"location":"Architecture/","text":"Architecture \u00b6 PirateBox is small on purpose. It is a FastAPI app with SQLite storage, a few templates, and some scripts to make Raspberry Pi behave. That is the whole magic trick. Repository layout \u00b6 app/main.py handles routes, templates, and HTTP responses. app/db.py handles SQLite access and file storage. app/templates/ holds Jinja2 templates. app/static/ holds CSS, JS, and images. scripts/ contains setup scripts and systemd unit files. tests/ contains pytest suites. docs/ contains project documentation (published to GitHub Pages). Request flow \u00b6 A device hits the Pi over Wi-Fi. FastAPI handles the request. Jinja2 renders HTML templates for pages. API routes return JSON for chat and file lists. app/db.py reads or writes SQLite rows. Data storage \u00b6 SQLite database at PIRATEBOX_DB_PATH . Uploaded files in PIRATEBOX_FILES_DIR . Defaults live under /var/lib/piratebox/data when you use the systemd service defaults. Captive portal behavior \u00b6 The app answers common OS connectivity checks and redirects them to /captive . The acknowledgment cookie keeps devices from looping forever. It is a small lie to stop a bigger annoyance. Optional e-Paper status \u00b6 The scripts/epaper_hat.py script reads system stats and PirateBox counts, then renders them to a 2.7\" e-Paper HAT. It tries multiple driver libraries because hardware vendors are not required to coordinate their choices. What not to expect \u00b6 No external API calls. No accounts or authentication. No distributed systems. The Pi is enough for this size of ambition.","title":"Architecture"},{"location":"Architecture/#architecture","text":"PirateBox is small on purpose. It is a FastAPI app with SQLite storage, a few templates, and some scripts to make Raspberry Pi behave. That is the whole magic trick.","title":"Architecture"},{"location":"Architecture/#repository-layout","text":"app/main.py handles routes, templates, and HTTP responses. app/db.py handles SQLite access and file storage. app/templates/ holds Jinja2 templates. app/static/ holds CSS, JS, and images. scripts/ contains setup scripts and systemd unit files. tests/ contains pytest suites. docs/ contains project documentation (published to GitHub Pages).","title":"Repository layout"},{"location":"Architecture/#request-flow","text":"A device hits the Pi over Wi-Fi. FastAPI handles the request. Jinja2 renders HTML templates for pages. API routes return JSON for chat and file lists. app/db.py reads or writes SQLite rows.","title":"Request flow"},{"location":"Architecture/#data-storage","text":"SQLite database at PIRATEBOX_DB_PATH . Uploaded files in PIRATEBOX_FILES_DIR . Defaults live under /var/lib/piratebox/data when you use the systemd service defaults.","title":"Data storage"},{"location":"Architecture/#captive-portal-behavior","text":"The app answers common OS connectivity checks and redirects them to /captive . The acknowledgment cookie keeps devices from looping forever. It is a small lie to stop a bigger annoyance.","title":"Captive portal behavior"},{"location":"Architecture/#optional-e-paper-status","text":"The scripts/epaper_hat.py script reads system stats and PirateBox counts, then renders them to a 2.7\" e-Paper HAT. It tries multiple driver libraries because hardware vendors are not required to coordinate their choices.","title":"Optional e-Paper status"},{"location":"Architecture/#what-not-to-expect","text":"No external API calls. No accounts or authentication. No distributed systems. The Pi is enough for this size of ambition.","title":"What not to expect"},{"location":"Configuration/","text":"Configuration \u00b6 PirateBox is configured with environment variables. You can set them in your shell, in /etc/default/piratebox , or in Docker Compose. Choose your preferred flavor of control. App settings \u00b6 PIRATEBOX_NAME (default: PirateBox ) PIRATEBOX_DATA_DIR (default: ./data ) PIRATEBOX_DB_PATH (default: ${PIRATEBOX_DATA_DIR}/piratebox.db ) PIRATEBOX_FILES_DIR (default: ${PIRATEBOX_DATA_DIR}/files ) PIRATEBOX_MAX_UPLOAD_MB (default: 512 ) PIRATEBOX_MAX_NICKNAME_LEN (default: 32 ) PIRATEBOX_MAX_MESSAGE_LEN (default: 500 ) PIRATEBOX_MAX_THREAD_TITLE_LEN (default: 120 ) PORT (default: 80 when running python app/main.py ) Docker Compose example \u00b6 services: piratebox: environment: PIRATEBOX_NAME: \"PirateBox\" PIRATEBOX_DB_PATH: \"/data/piratebox.db\" PIRATEBOX_FILES_DIR: \"/data/files\" systemd defaults \u00b6 If you use systemd, set defaults in /etc/default/piratebox : PIRATEBOX_NAME=PirateBox PIRATEBOX_DATA_DIR=/var/lib/piratebox/data PIRATEBOX_DB_PATH=/var/lib/piratebox/data/piratebox.db PIRATEBOX_FILES_DIR=/var/lib/piratebox/data/files PIRATEBOX_MAX_UPLOAD_MB=512 E-Paper settings \u00b6 PIRATEBOX_EPD_DRIVER (default: auto ) PIRATEBOX_EPD_WAVESHARE_MODULE (default: auto-detect) PIRATEBOX_EPD_INTERVAL (default: 30 seconds) PIRATEBOX_EPD_ROTATE (default: 0 ) PIRATEBOX_EPD_BUTTON_PINS (default: 5,6,13,19 ) PIRATEBOX_EPD_FONT (default: DejaVu Sans if available) PIRATEBOX_EPD_REFRESH_ON_CHANGE (default: 1 ) PIRATEBOX_EPD_FULL_REFRESH_EVERY (default: 10 ) Wireless settings \u00b6 If you use scripts/pi-setup.sh , the following environment variables control the AP setup: PIRATEBOX_WIFI_IFACE (default: wlan0 ) PIRATEBOX_SSID (default: PirateBox ) PIRATEBOX_GATEWAY_IP (default: 10.0.0.1 ) PIRATEBOX_CIDR (default: 24 ) PIRATEBOX_DHCP_START (default: 10.0.0.10 ) PIRATEBOX_DHCP_END (default: 10.0.0.200 ) PIRATEBOX_CHANNEL (default: 6 ) PIRATEBOX_HW_MODE (default: g ) PIRATEBOX_COUNTRY_CODE (default: empty) The cynical truth \u00b6 Every config knob adds complexity. Change only what you need, or you will spend your weekend arguing with yourself.","title":"Configuration"},{"location":"Configuration/#configuration","text":"PirateBox is configured with environment variables. You can set them in your shell, in /etc/default/piratebox , or in Docker Compose. Choose your preferred flavor of control.","title":"Configuration"},{"location":"Configuration/#app-settings","text":"PIRATEBOX_NAME (default: PirateBox ) PIRATEBOX_DATA_DIR (default: ./data ) PIRATEBOX_DB_PATH (default: ${PIRATEBOX_DATA_DIR}/piratebox.db ) PIRATEBOX_FILES_DIR (default: ${PIRATEBOX_DATA_DIR}/files ) PIRATEBOX_MAX_UPLOAD_MB (default: 512 ) PIRATEBOX_MAX_NICKNAME_LEN (default: 32 ) PIRATEBOX_MAX_MESSAGE_LEN (default: 500 ) PIRATEBOX_MAX_THREAD_TITLE_LEN (default: 120 ) PORT (default: 80 when running python app/main.py )","title":"App settings"},{"location":"Configuration/#docker-compose-example","text":"services: piratebox: environment: PIRATEBOX_NAME: \"PirateBox\" PIRATEBOX_DB_PATH: \"/data/piratebox.db\" PIRATEBOX_FILES_DIR: \"/data/files\"","title":"Docker Compose example"},{"location":"Configuration/#systemd-defaults","text":"If you use systemd, set defaults in /etc/default/piratebox : PIRATEBOX_NAME=PirateBox PIRATEBOX_DATA_DIR=/var/lib/piratebox/data PIRATEBOX_DB_PATH=/var/lib/piratebox/data/piratebox.db PIRATEBOX_FILES_DIR=/var/lib/piratebox/data/files PIRATEBOX_MAX_UPLOAD_MB=512","title":"systemd defaults"},{"location":"Configuration/#e-paper-settings","text":"PIRATEBOX_EPD_DRIVER (default: auto ) PIRATEBOX_EPD_WAVESHARE_MODULE (default: auto-detect) PIRATEBOX_EPD_INTERVAL (default: 30 seconds) PIRATEBOX_EPD_ROTATE (default: 0 ) PIRATEBOX_EPD_BUTTON_PINS (default: 5,6,13,19 ) PIRATEBOX_EPD_FONT (default: DejaVu Sans if available) PIRATEBOX_EPD_REFRESH_ON_CHANGE (default: 1 ) PIRATEBOX_EPD_FULL_REFRESH_EVERY (default: 10 )","title":"E-Paper settings"},{"location":"Configuration/#wireless-settings","text":"If you use scripts/pi-setup.sh , the following environment variables control the AP setup: PIRATEBOX_WIFI_IFACE (default: wlan0 ) PIRATEBOX_SSID (default: PirateBox ) PIRATEBOX_GATEWAY_IP (default: 10.0.0.1 ) PIRATEBOX_CIDR (default: 24 ) PIRATEBOX_DHCP_START (default: 10.0.0.10 ) PIRATEBOX_DHCP_END (default: 10.0.0.200 ) PIRATEBOX_CHANNEL (default: 6 ) PIRATEBOX_HW_MODE (default: g ) PIRATEBOX_COUNTRY_CODE (default: empty)","title":"Wireless settings"},{"location":"Configuration/#the-cynical-truth","text":"Every config knob adds complexity. Change only what you need, or you will spend your weekend arguing with yourself.","title":"The cynical truth"},{"location":"Development/","text":"Development \u00b6 PirateBox is a small FastAPI app. Development is straightforward, which is a rare kindness. Requirements \u00b6 Python 3.11+. Virtualenv. Patience. Setup \u00b6 python -m venv .venv source .venv/bin/activate pip install -r requirements.txt -r requirements-dev.txt Run locally \u00b6 uvicorn app.main:app --reload --host 0.0.0.0 --port 8080 Lint \u00b6 ruff check . Test \u00b6 pytest Semversioning \u00b6 We use Python Semantic Release to cut semver tags based on conventional commits. It updates CHANGELOG.md and bumps VERSION . If your commit messages are chaotic, so will be the releases. Expected flow: Merge conventional commits into main . CI runs the Semversioning job. Python Semantic Release tags the release and updates the changelog. Style notes \u00b6 Keep route handlers small and push persistence into app/db.py . Avoid external network calls; the project is offline-first. Favor clear, small diffs over ambitious rewrites.","title":"Development"},{"location":"Development/#development","text":"PirateBox is a small FastAPI app. Development is straightforward, which is a rare kindness.","title":"Development"},{"location":"Development/#requirements","text":"Python 3.11+. Virtualenv. Patience.","title":"Requirements"},{"location":"Development/#setup","text":"python -m venv .venv source .venv/bin/activate pip install -r requirements.txt -r requirements-dev.txt","title":"Setup"},{"location":"Development/#run-locally","text":"uvicorn app.main:app --reload --host 0.0.0.0 --port 8080","title":"Run locally"},{"location":"Development/#lint","text":"ruff check .","title":"Lint"},{"location":"Development/#test","text":"pytest","title":"Test"},{"location":"Development/#semversioning","text":"We use Python Semantic Release to cut semver tags based on conventional commits. It updates CHANGELOG.md and bumps VERSION . If your commit messages are chaotic, so will be the releases. Expected flow: Merge conventional commits into main . CI runs the Semversioning job. Python Semantic Release tags the release and updates the changelog.","title":"Semversioning"},{"location":"Development/#style-notes","text":"Keep route handlers small and push persistence into app/db.py . Avoid external network calls; the project is offline-first. Favor clear, small diffs over ambitious rewrites.","title":"Style notes"},{"location":"Epaper/","text":"E-Paper HAT \u00b6 PirateBox can drive a 2.7 inch e-Paper HAT (264x176, Rev 2.1) to show the PirateBox logo plus local stats (CPU, temp, disk, IP, counts). It also supports four hardware buttons if you wire them and configure GPIO pins. Hardware notes \u00b6 Enable SPI on the Pi ( raspi-config -> Interface Options -> SPI). The HAT connects via SPI and is powered from the Pi header. The display resolution is 264x176. Install \u00b6 Install the e-paper driver library (choose one): rpi_epd2in7 (third-party library), or waveshare_epd from Waveshare examples. (Optional) Use the install script to fetch drivers: sudo ./scripts/install-epd-driver.sh --driver auto Install the optional Python deps (Pillow + gpiozero). A venv is strongly recommended: python3 -m venv .venv source .venv/bin/activate pip install -r requirements-epaper.txt If GPIO libraries fail to import on Python 3.13, use the system Python (3.11/3.12) or a venv based on it. On Raspberry Pi 5, RPi.GPIO often fails; install python3-rpi-lgpio (or pip install rpi-lgpio ) so the Waveshare driver can import RPi.GPIO via the lgpio backend. Run \u00b6 sudo ./scripts/epaper_hat.py --interval 30 --rotate 0 Logo path can be overridden with --logo or PIRATEBOX_EPD_LOGO . Driver preference can be forced with --driver waveshare_epd or PIRATEBOX_EPD_DRIVER=waveshare_epd . If the Waveshare library is installed, the script tries epd2in7 first, then epd2in7_V2 . Override with PIRATEBOX_EPD_WAVESHARE_MODULE=epd2in7_V2 (or epd2in7 ) if your panel needs it. You can also set PIRATEBOX_EPD_FONT=/path/to/font.ttf to use a specific TTF font. Refresh behavior \u00b6 For smoother updates, the script uses partial refresh when the driver supports it and triggers full refresh every PIRATEBOX_EPD_FULL_REFRESH_EVERY loops (set to 0 to disable). If partial refresh is not available, you can reduce flashing by enabling refresh-on-change. Refresh-on-change defaults: PIRATEBOX_EPD_REFRESH_ON_CHANGE=1 PIRATEBOX_EPD_REFRESH_CPU_DELTA=5 PIRATEBOX_EPD_REFRESH_TEMP_DELTA=1 PIRATEBOX_EPD_REFRESH_MEM_DELTA=2 PIRATEBOX_EPD_REFRESH_DISK_DELTA=1 PIRATEBOX_EPD_REFRESH_COUNT_DELTA=1 PIRATEBOX_EPD_REFRESH_IP=1 When enabled, the display only refreshes if those deltas are exceeded or a button forces it. Buttons (optional) \u00b6 Buttons default to the Waveshare HAT pins (BCM 5,6,13,19). Override or disable as needed. Set button GPIO pins (BCM numbering): export PIRATEBOX_EPD_BUTTON_PINS=5,6,13,19 Disable buttons entirely: export PIRATEBOX_EPD_BUTTON_PINS=none Default actions: Key 1: status page (also refreshes it) Key 2: network page Key 3: box contents page Key 4: sleep/wake display Systemd service (optional) \u00b6 Copy the unit file and adjust paths/user: sudo cp ./scripts/piratebox-epaper.service /etc/systemd/system/piratebox-epaper.service sudo nano /etc/systemd/system/piratebox-epaper.service The unit expects a venv at /opt/piratebox/.venv by default. Adjust ExecStart= if you live elsewhere. (Optional) Create an environment file for overrides: sudo tee /etc/default/piratebox-epaper >/dev/null <<'EOF' PIRATEBOX_EPD_INTERVAL=30 PIRATEBOX_EPD_ROTATE=0 PIRATEBOX_EPD_BUTTON_PINS=5,6,13,19 EOF Enable and start: sudo systemctl daemon-reload sudo systemctl enable --now piratebox-epaper.service Check status/logs: systemctl status piratebox-epaper.service journalctl -u piratebox-epaper.service -f Troubleshooting \u00b6 \"Cannot determine SOC peripheral base address\" \u00b6 This usually means the GPIO library cannot read the Pi's device tree or RPi.GPIO does not support the Pi model: Ensure you're running on the host Pi OS, not inside a container. Use system Python (3.11/3.12) with python3-rpi-lgpio and python3-spidev . Confirm /proc/device-tree exists and SPI is enabled ( sudo raspi-config ). Debugging \u00b6 Run with --debug and watch for driver selection logs. If nothing shows up, the driver did not load. That is not a mystery, it is a missing dependency. Data sources \u00b6 CPU temp: /sys/class/thermal/thermal_zone0/temp CPU usage: /proc/stat Memory: /proc/meminfo Disk: filesystem stats on PIRATEBOX_DATA_DIR PirateBox counts: SQLite at PIRATEBOX_DB_PATH","title":"E-Paper HAT"},{"location":"Epaper/#e-paper-hat","text":"PirateBox can drive a 2.7 inch e-Paper HAT (264x176, Rev 2.1) to show the PirateBox logo plus local stats (CPU, temp, disk, IP, counts). It also supports four hardware buttons if you wire them and configure GPIO pins.","title":"E-Paper HAT"},{"location":"Epaper/#hardware-notes","text":"Enable SPI on the Pi ( raspi-config -> Interface Options -> SPI). The HAT connects via SPI and is powered from the Pi header. The display resolution is 264x176.","title":"Hardware notes"},{"location":"Epaper/#install","text":"Install the e-paper driver library (choose one): rpi_epd2in7 (third-party library), or waveshare_epd from Waveshare examples. (Optional) Use the install script to fetch drivers: sudo ./scripts/install-epd-driver.sh --driver auto Install the optional Python deps (Pillow + gpiozero). A venv is strongly recommended: python3 -m venv .venv source .venv/bin/activate pip install -r requirements-epaper.txt If GPIO libraries fail to import on Python 3.13, use the system Python (3.11/3.12) or a venv based on it. On Raspberry Pi 5, RPi.GPIO often fails; install python3-rpi-lgpio (or pip install rpi-lgpio ) so the Waveshare driver can import RPi.GPIO via the lgpio backend.","title":"Install"},{"location":"Epaper/#run","text":"sudo ./scripts/epaper_hat.py --interval 30 --rotate 0 Logo path can be overridden with --logo or PIRATEBOX_EPD_LOGO . Driver preference can be forced with --driver waveshare_epd or PIRATEBOX_EPD_DRIVER=waveshare_epd . If the Waveshare library is installed, the script tries epd2in7 first, then epd2in7_V2 . Override with PIRATEBOX_EPD_WAVESHARE_MODULE=epd2in7_V2 (or epd2in7 ) if your panel needs it. You can also set PIRATEBOX_EPD_FONT=/path/to/font.ttf to use a specific TTF font.","title":"Run"},{"location":"Epaper/#refresh-behavior","text":"For smoother updates, the script uses partial refresh when the driver supports it and triggers full refresh every PIRATEBOX_EPD_FULL_REFRESH_EVERY loops (set to 0 to disable). If partial refresh is not available, you can reduce flashing by enabling refresh-on-change. Refresh-on-change defaults: PIRATEBOX_EPD_REFRESH_ON_CHANGE=1 PIRATEBOX_EPD_REFRESH_CPU_DELTA=5 PIRATEBOX_EPD_REFRESH_TEMP_DELTA=1 PIRATEBOX_EPD_REFRESH_MEM_DELTA=2 PIRATEBOX_EPD_REFRESH_DISK_DELTA=1 PIRATEBOX_EPD_REFRESH_COUNT_DELTA=1 PIRATEBOX_EPD_REFRESH_IP=1 When enabled, the display only refreshes if those deltas are exceeded or a button forces it.","title":"Refresh behavior"},{"location":"Epaper/#buttons-optional","text":"Buttons default to the Waveshare HAT pins (BCM 5,6,13,19). Override or disable as needed. Set button GPIO pins (BCM numbering): export PIRATEBOX_EPD_BUTTON_PINS=5,6,13,19 Disable buttons entirely: export PIRATEBOX_EPD_BUTTON_PINS=none Default actions: Key 1: status page (also refreshes it) Key 2: network page Key 3: box contents page Key 4: sleep/wake display","title":"Buttons (optional)"},{"location":"Epaper/#systemd-service-optional","text":"Copy the unit file and adjust paths/user: sudo cp ./scripts/piratebox-epaper.service /etc/systemd/system/piratebox-epaper.service sudo nano /etc/systemd/system/piratebox-epaper.service The unit expects a venv at /opt/piratebox/.venv by default. Adjust ExecStart= if you live elsewhere. (Optional) Create an environment file for overrides: sudo tee /etc/default/piratebox-epaper >/dev/null <<'EOF' PIRATEBOX_EPD_INTERVAL=30 PIRATEBOX_EPD_ROTATE=0 PIRATEBOX_EPD_BUTTON_PINS=5,6,13,19 EOF Enable and start: sudo systemctl daemon-reload sudo systemctl enable --now piratebox-epaper.service Check status/logs: systemctl status piratebox-epaper.service journalctl -u piratebox-epaper.service -f","title":"Systemd service (optional)"},{"location":"Epaper/#troubleshooting","text":"","title":"Troubleshooting"},{"location":"Epaper/#cannot-determine-soc-peripheral-base-address","text":"This usually means the GPIO library cannot read the Pi's device tree or RPi.GPIO does not support the Pi model: Ensure you're running on the host Pi OS, not inside a container. Use system Python (3.11/3.12) with python3-rpi-lgpio and python3-spidev . Confirm /proc/device-tree exists and SPI is enabled ( sudo raspi-config ).","title":"\"Cannot determine SOC peripheral base address\""},{"location":"Epaper/#debugging","text":"Run with --debug and watch for driver selection logs. If nothing shows up, the driver did not load. That is not a mystery, it is a missing dependency.","title":"Debugging"},{"location":"Epaper/#data-sources","text":"CPU temp: /sys/class/thermal/thermal_zone0/temp CPU usage: /proc/stat Memory: /proc/meminfo Disk: filesystem stats on PIRATEBOX_DATA_DIR PirateBox counts: SQLite at PIRATEBOX_DB_PATH","title":"Data sources"},{"location":"FAQ/","text":"FAQ \u00b6 Is PirateBox secure? \u00b6 No. It is an open Wi-Fi by design. It is meant for local sharing, not secret keeping. Can I add a password? \u00b6 You can, but that defeats the \u201cwalk up and share\u201d idea. If you insist, configure hostapd with WPA2 like any other AP. Does it need the internet? \u00b6 The app does not. The first boot image does need temporary internet access to install Python packages. After that, you can yank the cable. Why SQLite? \u00b6 Because it is small, reliable, and boring. Those are virtues. Can I run it on something other than Raspberry Pi? \u00b6 Yes. It is a FastAPI app, so it runs anywhere Python runs. The access point scripts are Pi-specific because hardware is not a fair fight. Where is the data stored? \u00b6 SQLite at PIRATEBOX_DB_PATH and files under PIRATEBOX_FILES_DIR . If you forget, it is probably in /var/lib/piratebox/data . How do I reset everything? \u00b6 Stop the app, delete the data directory, start again. It is the digital equivalent of lighting it on fire and pretending it never happened.","title":"FAQ"},{"location":"FAQ/#faq","text":"","title":"FAQ"},{"location":"FAQ/#is-piratebox-secure","text":"No. It is an open Wi-Fi by design. It is meant for local sharing, not secret keeping.","title":"Is PirateBox secure?"},{"location":"FAQ/#can-i-add-a-password","text":"You can, but that defeats the \u201cwalk up and share\u201d idea. If you insist, configure hostapd with WPA2 like any other AP.","title":"Can I add a password?"},{"location":"FAQ/#does-it-need-the-internet","text":"The app does not. The first boot image does need temporary internet access to install Python packages. After that, you can yank the cable.","title":"Does it need the internet?"},{"location":"FAQ/#why-sqlite","text":"Because it is small, reliable, and boring. Those are virtues.","title":"Why SQLite?"},{"location":"FAQ/#can-i-run-it-on-something-other-than-raspberry-pi","text":"Yes. It is a FastAPI app, so it runs anywhere Python runs. The access point scripts are Pi-specific because hardware is not a fair fight.","title":"Can I run it on something other than Raspberry Pi?"},{"location":"FAQ/#where-is-the-data-stored","text":"SQLite at PIRATEBOX_DB_PATH and files under PIRATEBOX_FILES_DIR . If you forget, it is probably in /var/lib/piratebox/data .","title":"Where is the data stored?"},{"location":"FAQ/#how-do-i-reset-everything","text":"Stop the app, delete the data directory, start again. It is the digital equivalent of lighting it on fire and pretending it never happened.","title":"How do I reset everything?"},{"location":"Install-Raspberry-Pi/","text":"Install on Raspberry Pi \u00b6 This guide assumes Raspberry Pi OS Lite (64-bit) and works well on Raspberry Pi 5. The goal is an open Wi-Fi access point that keeps traffic local and points clients to PirateBox. Before you start \u00b6 Use a decent power supply. Random phone chargers have a habit of lying. Have a keyboard and monitor, or enable SSH during imaging. Decide if you want to run via Docker or systemd. Docker is convenient. Systemd is honest. Quick script (optional) \u00b6 Run the setup script to apply the access point and offline steps automatically: sudo ./scripts/pi-setup.sh --iface wlan0 To run Docker Compose at the end: sudo ./scripts/pi-setup.sh --iface wlan0 --run-compose If you use the script, it handles the hostapd/dnsmasq config, static IP, and offline rules. You can skip to the test section. Step 1: Flash the OS \u00b6 Download Raspberry Pi OS Lite (64-bit). Flash it to a microSD card using Raspberry Pi Imager or Balena Etcher. If you want SSH, enable it in the Imager settings. Boot the Pi and log in. Step 2: Update packages \u00b6 sudo apt update sudo apt upgrade -y Step 3: Install PirateBox \u00b6 Option A: Docker \u00b6 sudo apt install -y docker.io docker-compose-plugin sudo systemctl enable --now docker Clone the repo and start the stack: git clone https://github.com/your-org/piratebox.git cd piratebox docker compose up -d --build The web app will be available at http://10.0.0.1:8080 when the AP is up. If you want the app on port 80 for captive portals, change docker-compose.yml to \"80:8080\" . The app serves a small captive portal welcome page at /captive and redirects common OS connectivity checks there. The OK button sets the device as acknowledged and attempts to open the main UI. Option B: systemd + venv \u00b6 sudo apt install -y python3-venv python3-pip git clone https://github.com/your-org/piratebox.git cd piratebox python3 -m venv /opt/piratebox/.venv /opt/piratebox/.venv/bin/pip install -r requirements.txt Install the unit file: sudo cp ./scripts/piratebox.service /etc/systemd/system/piratebox.service sudo systemctl daemon-reload sudo systemctl enable --now piratebox.service Step 4: Configure the access point \u00b6 You can run the helper script or configure manually. The script is faster and less educational. Using an external USB Wi-Fi adapter \u00b6 If you want the PirateBox access point to run on a USB Wi-Fi adapter, identify the adapter interface name and use it everywhere instead of wlan0 . Find the interface name: ip -br link iw dev Common names are wlan1 or wlan2 . In the steps below, replace wlan0 with your adapter interface (for example, wlan1 ). Notes: Make sure the adapter supports AP mode ( iw list shows AP under \"Supported interface modes\"). You can keep the built-in Wi-Fi ( wlan0 ) for admin access or leave it unused. Manual steps \u00b6 Install packages: sudo apt install -y hostapd dnsmasq sudo systemctl unmask hostapd Give wlan0 a static IP using your networking stack: Option A (dhcpcd, common on Lite): sudo tee -a /etc/dhcpcd.conf >/dev/null <<'EOF' # PirateBox static IP interface wlan0 static ip_address=10.0.0.1/24 nohook wpa_supplicant EOF sudo systemctl restart dhcpcd Option B (NetworkManager): sudo nmcli dev set wlan0 managed yes sudo nmcli con add type wifi ifname wlan0 con-name piratebox-ap autoconnect yes ssid PirateBox sudo nmcli con modify piratebox-ap ipv4.addresses 10.0.0.1/24 ipv4.method manual Configure hostapd: sudo tee /etc/hostapd/hostapd.conf >/dev/null <<'EOF' interface=wlan0 driver=nl80211 ssid=PirateBox hw_mode=g channel=6 auth_algs=1 wpa=0 wmm_enabled=0 ignore_broadcast_ssid=0 EOF sudo tee /etc/default/hostapd >/dev/null <<'EOF' DAEMON_CONF=\"/etc/hostapd/hostapd.conf\" EOF Configure dnsmasq: sudo tee /etc/dnsmasq.d/piratebox.conf >/dev/null <<'EOF' interface=wlan0 dhcp-range=10.0.0.10,10.0.0.200,255.255.255.0,12h dhcp-option=option:router,10.0.0.1 dhcp-option=option:dns-server,10.0.0.1 address=/#/10.0.0.1 EOF Step 5: Keep it offline \u00b6 Make sure the access point does not forward traffic to the internet: sudo sh -c 'printf \"net.ipv4.ip_forward=0\\n\" > /etc/sysctl.d/99-piratebox.conf' sudo sysctl -p /etc/sysctl.d/99-piratebox.conf If the Pi has an ethernet uplink, block forwarding from Wi-Fi: sudo iptables -A FORWARD -i wlan0 -o eth0 -j DROP sudo iptables -A FORWARD -i eth0 -o wlan0 -j DROP (Optional) Persist iptables using iptables-persistent . Step 6: Start services \u00b6 sudo systemctl enable --now hostapd dnsmasq Step 7: Run PirateBox \u00b6 If you are using Docker, start the stack (or re-run after changing ports): docker compose up -d --build If you are using systemd, confirm the service is enabled and running: sudo systemctl status piratebox.service Step 8: Test \u00b6 Connect a phone or laptop to the PirateBox Wi-Fi. Open a browser. A captive portal welcome page should appear; tap OK to enter. Upload a file, post a chat message, and create a forum thread. Optional: Prebuilt image \u00b6 If you want an image that boots and installs PirateBox on first startup, see Prebuilt-Image.md or build it yourself: ./scripts/build_rpi_image.sh The image includes a first-boot systemd unit that installs Python deps and enables piratebox.service . It assumes temporary internet access on first boot to pull Python packages, then you can unplug it. Optional: Set environment defaults \u00b6 sudo tee /etc/default/piratebox >/dev/null <<'EOF' PIRATEBOX_NAME=PirateBox PIRATEBOX_DATA_DIR=/var/lib/piratebox/data PIRATEBOX_DB_PATH=/var/lib/piratebox/data/piratebox.db PIRATEBOX_FILES_DIR=/var/lib/piratebox/data/files PIRATEBOX_MAX_UPLOAD_MB=512 EOF Notes \u00b6 For captive portal friendliness, running on port 80 helps. app/main.py uses port 80 by default when started directly. If you change the SSID or subnet, update the docs and your expectations. If you use a different Pi OS networking stack, adjust the Wi-Fi static IP steps accordingly. The Pi is the single point of failure. Keep a spare SD card if you want to sleep at night.","title":"Install on Raspberry Pi"},{"location":"Install-Raspberry-Pi/#install-on-raspberry-pi","text":"This guide assumes Raspberry Pi OS Lite (64-bit) and works well on Raspberry Pi 5. The goal is an open Wi-Fi access point that keeps traffic local and points clients to PirateBox.","title":"Install on Raspberry Pi"},{"location":"Install-Raspberry-Pi/#before-you-start","text":"Use a decent power supply. Random phone chargers have a habit of lying. Have a keyboard and monitor, or enable SSH during imaging. Decide if you want to run via Docker or systemd. Docker is convenient. Systemd is honest.","title":"Before you start"},{"location":"Install-Raspberry-Pi/#quick-script-optional","text":"Run the setup script to apply the access point and offline steps automatically: sudo ./scripts/pi-setup.sh --iface wlan0 To run Docker Compose at the end: sudo ./scripts/pi-setup.sh --iface wlan0 --run-compose If you use the script, it handles the hostapd/dnsmasq config, static IP, and offline rules. You can skip to the test section.","title":"Quick script (optional)"},{"location":"Install-Raspberry-Pi/#step-1-flash-the-os","text":"Download Raspberry Pi OS Lite (64-bit). Flash it to a microSD card using Raspberry Pi Imager or Balena Etcher. If you want SSH, enable it in the Imager settings. Boot the Pi and log in.","title":"Step 1: Flash the OS"},{"location":"Install-Raspberry-Pi/#step-2-update-packages","text":"sudo apt update sudo apt upgrade -y","title":"Step 2: Update packages"},{"location":"Install-Raspberry-Pi/#step-3-install-piratebox","text":"","title":"Step 3: Install PirateBox"},{"location":"Install-Raspberry-Pi/#option-a-docker","text":"sudo apt install -y docker.io docker-compose-plugin sudo systemctl enable --now docker Clone the repo and start the stack: git clone https://github.com/your-org/piratebox.git cd piratebox docker compose up -d --build The web app will be available at http://10.0.0.1:8080 when the AP is up. If you want the app on port 80 for captive portals, change docker-compose.yml to \"80:8080\" . The app serves a small captive portal welcome page at /captive and redirects common OS connectivity checks there. The OK button sets the device as acknowledged and attempts to open the main UI.","title":"Option A: Docker"},{"location":"Install-Raspberry-Pi/#option-b-systemd-venv","text":"sudo apt install -y python3-venv python3-pip git clone https://github.com/your-org/piratebox.git cd piratebox python3 -m venv /opt/piratebox/.venv /opt/piratebox/.venv/bin/pip install -r requirements.txt Install the unit file: sudo cp ./scripts/piratebox.service /etc/systemd/system/piratebox.service sudo systemctl daemon-reload sudo systemctl enable --now piratebox.service","title":"Option B: systemd + venv"},{"location":"Install-Raspberry-Pi/#step-4-configure-the-access-point","text":"You can run the helper script or configure manually. The script is faster and less educational.","title":"Step 4: Configure the access point"},{"location":"Install-Raspberry-Pi/#using-an-external-usb-wi-fi-adapter","text":"If you want the PirateBox access point to run on a USB Wi-Fi adapter, identify the adapter interface name and use it everywhere instead of wlan0 . Find the interface name: ip -br link iw dev Common names are wlan1 or wlan2 . In the steps below, replace wlan0 with your adapter interface (for example, wlan1 ). Notes: Make sure the adapter supports AP mode ( iw list shows AP under \"Supported interface modes\"). You can keep the built-in Wi-Fi ( wlan0 ) for admin access or leave it unused.","title":"Using an external USB Wi-Fi adapter"},{"location":"Install-Raspberry-Pi/#manual-steps","text":"Install packages: sudo apt install -y hostapd dnsmasq sudo systemctl unmask hostapd Give wlan0 a static IP using your networking stack: Option A (dhcpcd, common on Lite): sudo tee -a /etc/dhcpcd.conf >/dev/null <<'EOF' # PirateBox static IP interface wlan0 static ip_address=10.0.0.1/24 nohook wpa_supplicant EOF sudo systemctl restart dhcpcd Option B (NetworkManager): sudo nmcli dev set wlan0 managed yes sudo nmcli con add type wifi ifname wlan0 con-name piratebox-ap autoconnect yes ssid PirateBox sudo nmcli con modify piratebox-ap ipv4.addresses 10.0.0.1/24 ipv4.method manual Configure hostapd: sudo tee /etc/hostapd/hostapd.conf >/dev/null <<'EOF' interface=wlan0 driver=nl80211 ssid=PirateBox hw_mode=g channel=6 auth_algs=1 wpa=0 wmm_enabled=0 ignore_broadcast_ssid=0 EOF sudo tee /etc/default/hostapd >/dev/null <<'EOF' DAEMON_CONF=\"/etc/hostapd/hostapd.conf\" EOF Configure dnsmasq: sudo tee /etc/dnsmasq.d/piratebox.conf >/dev/null <<'EOF' interface=wlan0 dhcp-range=10.0.0.10,10.0.0.200,255.255.255.0,12h dhcp-option=option:router,10.0.0.1 dhcp-option=option:dns-server,10.0.0.1 address=/#/10.0.0.1 EOF","title":"Manual steps"},{"location":"Install-Raspberry-Pi/#step-5-keep-it-offline","text":"Make sure the access point does not forward traffic to the internet: sudo sh -c 'printf \"net.ipv4.ip_forward=0\\n\" > /etc/sysctl.d/99-piratebox.conf' sudo sysctl -p /etc/sysctl.d/99-piratebox.conf If the Pi has an ethernet uplink, block forwarding from Wi-Fi: sudo iptables -A FORWARD -i wlan0 -o eth0 -j DROP sudo iptables -A FORWARD -i eth0 -o wlan0 -j DROP (Optional) Persist iptables using iptables-persistent .","title":"Step 5: Keep it offline"},{"location":"Install-Raspberry-Pi/#step-6-start-services","text":"sudo systemctl enable --now hostapd dnsmasq","title":"Step 6: Start services"},{"location":"Install-Raspberry-Pi/#step-7-run-piratebox","text":"If you are using Docker, start the stack (or re-run after changing ports): docker compose up -d --build If you are using systemd, confirm the service is enabled and running: sudo systemctl status piratebox.service","title":"Step 7: Run PirateBox"},{"location":"Install-Raspberry-Pi/#step-8-test","text":"Connect a phone or laptop to the PirateBox Wi-Fi. Open a browser. A captive portal welcome page should appear; tap OK to enter. Upload a file, post a chat message, and create a forum thread.","title":"Step 8: Test"},{"location":"Install-Raspberry-Pi/#optional-prebuilt-image","text":"If you want an image that boots and installs PirateBox on first startup, see Prebuilt-Image.md or build it yourself: ./scripts/build_rpi_image.sh The image includes a first-boot systemd unit that installs Python deps and enables piratebox.service . It assumes temporary internet access on first boot to pull Python packages, then you can unplug it.","title":"Optional: Prebuilt image"},{"location":"Install-Raspberry-Pi/#optional-set-environment-defaults","text":"sudo tee /etc/default/piratebox >/dev/null <<'EOF' PIRATEBOX_NAME=PirateBox PIRATEBOX_DATA_DIR=/var/lib/piratebox/data PIRATEBOX_DB_PATH=/var/lib/piratebox/data/piratebox.db PIRATEBOX_FILES_DIR=/var/lib/piratebox/data/files PIRATEBOX_MAX_UPLOAD_MB=512 EOF","title":"Optional: Set environment defaults"},{"location":"Install-Raspberry-Pi/#notes","text":"For captive portal friendliness, running on port 80 helps. app/main.py uses port 80 by default when started directly. If you change the SSID or subnet, update the docs and your expectations. If you use a different Pi OS networking stack, adjust the Wi-Fi static IP steps accordingly. The Pi is the single point of failure. Keep a spare SD card if you want to sleep at night.","title":"Notes"},{"location":"Operations/","text":"Operations \u00b6 PirateBox is simple, but it still needs the usual sysadmin rituals: start, stop, check logs, and back things up before they vanish. Run with Docker \u00b6 docker compose up -d --build Stop: docker compose down Logs: docker compose logs -f Run with systemd \u00b6 Start: sudo systemctl start piratebox.service Stop: sudo systemctl stop piratebox.service Status: systemctl status piratebox.service Logs: journalctl -u piratebox.service -f Backups \u00b6 Your data lives in two places: SQLite database at PIRATEBOX_DB_PATH . Uploaded files at PIRATEBOX_FILES_DIR . Back them up together. If you back up only one, you get a half-finished story. Upgrades \u00b6 Stop the service. Pull the latest code. Reinstall requirements if needed. Start the service. Example: sudo systemctl stop piratebox.service cd /opt/piratebox git pull /opt/piratebox/.venv/bin/pip install -r requirements.txt sudo systemctl start piratebox.service Health checks \u00b6 Open http://10.0.0.1:8080 and ensure pages load. Upload and download a small file. Post a chat message and verify it appears. Create a forum thread and reply to it. Scheduled maintenance \u00b6 Reboot the Pi occasionally. It does not like being ignored forever. Check free disk space. Piracy fills storage fast. Keep a spare SD card with a known good image.","title":"Operations"},{"location":"Operations/#operations","text":"PirateBox is simple, but it still needs the usual sysadmin rituals: start, stop, check logs, and back things up before they vanish.","title":"Operations"},{"location":"Operations/#run-with-docker","text":"docker compose up -d --build Stop: docker compose down Logs: docker compose logs -f","title":"Run with Docker"},{"location":"Operations/#run-with-systemd","text":"Start: sudo systemctl start piratebox.service Stop: sudo systemctl stop piratebox.service Status: systemctl status piratebox.service Logs: journalctl -u piratebox.service -f","title":"Run with systemd"},{"location":"Operations/#backups","text":"Your data lives in two places: SQLite database at PIRATEBOX_DB_PATH . Uploaded files at PIRATEBOX_FILES_DIR . Back them up together. If you back up only one, you get a half-finished story.","title":"Backups"},{"location":"Operations/#upgrades","text":"Stop the service. Pull the latest code. Reinstall requirements if needed. Start the service. Example: sudo systemctl stop piratebox.service cd /opt/piratebox git pull /opt/piratebox/.venv/bin/pip install -r requirements.txt sudo systemctl start piratebox.service","title":"Upgrades"},{"location":"Operations/#health-checks","text":"Open http://10.0.0.1:8080 and ensure pages load. Upload and download a small file. Post a chat message and verify it appears. Create a forum thread and reply to it.","title":"Health checks"},{"location":"Operations/#scheduled-maintenance","text":"Reboot the Pi occasionally. It does not like being ignored forever. Check free disk space. Piracy fills storage fast. Keep a spare SD card with a known good image.","title":"Scheduled maintenance"},{"location":"Overview/","text":"Overview \u00b6 PirateBox is a local-only sharing box for Raspberry Pi. It sets up an open Wi-Fi network and hosts a FastAPI web app that lets people exchange files, chat messages, and forum posts. Everything stays on the device. No cloud, no account system, no sense of permanence beyond a microSD card. Core features \u00b6 Open Wi-Fi access point with captive portal. File upload and download. Anonymous chat room. Threaded forum. SQLite persistence on the Pi. Optional e-Paper HAT status display. Why it exists \u00b6 Because not every network needs to be online, and not every file needs to be indexed by someone else. PirateBox is for events, classrooms, workshops, or anywhere you want sharing without the internet doing what it does. What you need \u00b6 Raspberry Pi 4 or 5 (5 is recommended). microSD card, 16 GB minimum. USB power supply that is not lying about its amps. Optional USB Wi-Fi adapter if you want a dedicated AP radio. Optional e-Paper HAT for the status display. How it works \u00b6 The Pi broadcasts an open SSID. Devices connect and get routed to the PirateBox web app. The app serves HTML pages and a small API for chat and files. Data is stored in SQLite and the file system under PIRATEBOX_DATA_DIR . The reality check \u00b6 Open Wi-Fi means anyone can connect. That is the point and also the risk. The Pi is the server and the storage. If it goes down, so does your sharing box. The only backup is the one you actually take.","title":"Overview"},{"location":"Overview/#overview","text":"PirateBox is a local-only sharing box for Raspberry Pi. It sets up an open Wi-Fi network and hosts a FastAPI web app that lets people exchange files, chat messages, and forum posts. Everything stays on the device. No cloud, no account system, no sense of permanence beyond a microSD card.","title":"Overview"},{"location":"Overview/#core-features","text":"Open Wi-Fi access point with captive portal. File upload and download. Anonymous chat room. Threaded forum. SQLite persistence on the Pi. Optional e-Paper HAT status display.","title":"Core features"},{"location":"Overview/#why-it-exists","text":"Because not every network needs to be online, and not every file needs to be indexed by someone else. PirateBox is for events, classrooms, workshops, or anywhere you want sharing without the internet doing what it does.","title":"Why it exists"},{"location":"Overview/#what-you-need","text":"Raspberry Pi 4 or 5 (5 is recommended). microSD card, 16 GB minimum. USB power supply that is not lying about its amps. Optional USB Wi-Fi adapter if you want a dedicated AP radio. Optional e-Paper HAT for the status display.","title":"What you need"},{"location":"Overview/#how-it-works","text":"The Pi broadcasts an open SSID. Devices connect and get routed to the PirateBox web app. The app serves HTML pages and a small API for chat and files. Data is stored in SQLite and the file system under PIRATEBOX_DATA_DIR .","title":"How it works"},{"location":"Overview/#the-reality-check","text":"Open Wi-Fi means anyone can connect. That is the point and also the risk. The Pi is the server and the storage. If it goes down, so does your sharing box. The only backup is the one you actually take.","title":"The reality check"},{"location":"Prebuilt-Image/","text":"Prebuilt Image \u00b6 PirateBox can be shipped as a Raspberry Pi OS image that runs a first-boot installer and starts the service automatically. It is the closest thing to a one-click install that does not require belief in magic. What the image includes \u00b6 Official Raspberry Pi OS Lite (64-bit) base image. PirateBox source under /opt/piratebox . A first-boot systemd unit that installs Python dependencies and enables the service. Default environment values in /etc/default/piratebox . Where to get it \u00b6 CI builds an .img.xz artifact when the workflow runs. You can build locally using scripts/build_rpi_image.sh . Build it yourself \u00b6 ./scripts/build_rpi_image.sh The script will: Download the official Raspberry Pi OS Lite image. Mount the partitions. Copy the PirateBox repo into /opt/piratebox . Install the first-boot unit and environment defaults. Repack the image as piratebox-raspios-lite.img.xz . Build script knobs \u00b6 PIRATEBOX_RPI_IMAGE_URL to override the official image URL. PIRATEBOX_IMAGE_OUTDIR to change the output directory. PIRATEBOX_IMAGE_WORKDIR to change the scratch space. PIRATEBOX_IMAGE_KEEP_WORKDIR=1 to keep the scratch space for debugging. First boot behavior \u00b6 The image runs /usr/local/sbin/piratebox-firstboot on the first boot. It will: Install python3-venv and python3-pip . Create a venv at /opt/piratebox/.venv . Install Python requirements. Enable and start piratebox.service . Temporary internet requirement \u00b6 The first boot needs temporary internet access to install Python packages. After that, you can keep the network offline. If you boot without internet, the service will not start until you rerun the first-boot script or provide the packages manually. That is not a bug, it is physics. Customize defaults before first boot \u00b6 Edit these files in the image if you want different defaults: /etc/default/piratebox /etc/default/piratebox-epaper Re-run first boot \u00b6 If you need to rerun provisioning: sudo rm -f /var/lib/piratebox/.firstboot_done sudo systemctl start piratebox-firstboot.service","title":"Prebuilt Image"},{"location":"Prebuilt-Image/#prebuilt-image","text":"PirateBox can be shipped as a Raspberry Pi OS image that runs a first-boot installer and starts the service automatically. It is the closest thing to a one-click install that does not require belief in magic.","title":"Prebuilt Image"},{"location":"Prebuilt-Image/#what-the-image-includes","text":"Official Raspberry Pi OS Lite (64-bit) base image. PirateBox source under /opt/piratebox . A first-boot systemd unit that installs Python dependencies and enables the service. Default environment values in /etc/default/piratebox .","title":"What the image includes"},{"location":"Prebuilt-Image/#where-to-get-it","text":"CI builds an .img.xz artifact when the workflow runs. You can build locally using scripts/build_rpi_image.sh .","title":"Where to get it"},{"location":"Prebuilt-Image/#build-it-yourself","text":"./scripts/build_rpi_image.sh The script will: Download the official Raspberry Pi OS Lite image. Mount the partitions. Copy the PirateBox repo into /opt/piratebox . Install the first-boot unit and environment defaults. Repack the image as piratebox-raspios-lite.img.xz .","title":"Build it yourself"},{"location":"Prebuilt-Image/#build-script-knobs","text":"PIRATEBOX_RPI_IMAGE_URL to override the official image URL. PIRATEBOX_IMAGE_OUTDIR to change the output directory. PIRATEBOX_IMAGE_WORKDIR to change the scratch space. PIRATEBOX_IMAGE_KEEP_WORKDIR=1 to keep the scratch space for debugging.","title":"Build script knobs"},{"location":"Prebuilt-Image/#first-boot-behavior","text":"The image runs /usr/local/sbin/piratebox-firstboot on the first boot. It will: Install python3-venv and python3-pip . Create a venv at /opt/piratebox/.venv . Install Python requirements. Enable and start piratebox.service .","title":"First boot behavior"},{"location":"Prebuilt-Image/#temporary-internet-requirement","text":"The first boot needs temporary internet access to install Python packages. After that, you can keep the network offline. If you boot without internet, the service will not start until you rerun the first-boot script or provide the packages manually. That is not a bug, it is physics.","title":"Temporary internet requirement"},{"location":"Prebuilt-Image/#customize-defaults-before-first-boot","text":"Edit these files in the image if you want different defaults: /etc/default/piratebox /etc/default/piratebox-epaper","title":"Customize defaults before first boot"},{"location":"Prebuilt-Image/#re-run-first-boot","text":"If you need to rerun provisioning: sudo rm -f /var/lib/piratebox/.firstboot_done sudo systemctl start piratebox-firstboot.service","title":"Re-run first boot"},{"location":"Troubleshooting/","text":"Troubleshooting \u00b6 Things fail. PirateBox is honest about it. Here are the common ones. The Wi-Fi network does not show up \u00b6 Check that hostapd is running: systemctl status hostapd . Confirm the Wi-Fi interface name with ip -br link . If you use a USB adapter, ensure it supports AP mode with iw list . Captive portal does not appear \u00b6 Manually browse to http://10.0.0.1:8080 . Some devices cache captive portal results. Toggle Wi-Fi or reboot the device. If you want captive portal detection to work better, run the app on port 80. DNS redirects do not work \u00b6 Verify dnsmasq is running: systemctl status dnsmasq . Check /etc/dnsmasq.d/piratebox.conf for typos. Make sure address=/#/10.0.0.1 is present. PirateBox service does not start \u00b6 systemctl status piratebox.service for logs. If you use the systemd unit, ensure /opt/piratebox/.venv exists. Reinstall dependencies with /opt/piratebox/.venv/bin/pip install -r requirements.txt . First-boot image never starts PirateBox \u00b6 First boot needs temporary internet access to install Python packages. Check /var/log/piratebox-firstboot.log for errors. Re-run first boot: sudo rm -f /var/lib/piratebox/.firstboot_done sudo systemctl start piratebox-firstboot.service File uploads fail \u00b6 Check PIRATEBOX_MAX_UPLOAD_MB . Confirm free disk space with df -h . Verify PIRATEBOX_FILES_DIR exists and is writable. Chat messages do not appear \u00b6 Make sure you are not blocked by the browser cache. Check the API endpoint directly: http://10.0.0.1:8080/api/chat/messages . Look for errors in the app logs. The e-Paper display is blank \u00b6 Confirm SPI is enabled in raspi-config . Run the script manually: sudo ./scripts/epaper_hat.py --debug . Install GPIO libraries: sudo apt install python3-rpi-lgpio python3-spidev . You want it online \u00b6 This is an offline-first project. If you must add internet, do so knowingly and accept that it defeats the point.","title":"Troubleshooting"},{"location":"Troubleshooting/#troubleshooting","text":"Things fail. PirateBox is honest about it. Here are the common ones.","title":"Troubleshooting"},{"location":"Troubleshooting/#the-wi-fi-network-does-not-show-up","text":"Check that hostapd is running: systemctl status hostapd . Confirm the Wi-Fi interface name with ip -br link . If you use a USB adapter, ensure it supports AP mode with iw list .","title":"The Wi-Fi network does not show up"},{"location":"Troubleshooting/#captive-portal-does-not-appear","text":"Manually browse to http://10.0.0.1:8080 . Some devices cache captive portal results. Toggle Wi-Fi or reboot the device. If you want captive portal detection to work better, run the app on port 80.","title":"Captive portal does not appear"},{"location":"Troubleshooting/#dns-redirects-do-not-work","text":"Verify dnsmasq is running: systemctl status dnsmasq . Check /etc/dnsmasq.d/piratebox.conf for typos. Make sure address=/#/10.0.0.1 is present.","title":"DNS redirects do not work"},{"location":"Troubleshooting/#piratebox-service-does-not-start","text":"systemctl status piratebox.service for logs. If you use the systemd unit, ensure /opt/piratebox/.venv exists. Reinstall dependencies with /opt/piratebox/.venv/bin/pip install -r requirements.txt .","title":"PirateBox service does not start"},{"location":"Troubleshooting/#first-boot-image-never-starts-piratebox","text":"First boot needs temporary internet access to install Python packages. Check /var/log/piratebox-firstboot.log for errors. Re-run first boot: sudo rm -f /var/lib/piratebox/.firstboot_done sudo systemctl start piratebox-firstboot.service","title":"First-boot image never starts PirateBox"},{"location":"Troubleshooting/#file-uploads-fail","text":"Check PIRATEBOX_MAX_UPLOAD_MB . Confirm free disk space with df -h . Verify PIRATEBOX_FILES_DIR exists and is writable.","title":"File uploads fail"},{"location":"Troubleshooting/#chat-messages-do-not-appear","text":"Make sure you are not blocked by the browser cache. Check the API endpoint directly: http://10.0.0.1:8080/api/chat/messages . Look for errors in the app logs.","title":"Chat messages do not appear"},{"location":"Troubleshooting/#the-e-paper-display-is-blank","text":"Confirm SPI is enabled in raspi-config . Run the script manually: sudo ./scripts/epaper_hat.py --debug . Install GPIO libraries: sudo apt install python3-rpi-lgpio python3-spidev .","title":"The e-Paper display is blank"},{"location":"Troubleshooting/#you-want-it-online","text":"This is an offline-first project. If you must add internet, do so knowingly and accept that it defeats the point.","title":"You want it online"}]}